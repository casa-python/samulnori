# Samulnori Frontend

AI 기반 사물놀이 앱의 프론트엔드 프로젝트입니다. React와 Electron을 기반으로 한 실시간 객체 인식과 사운드 매핑을 통한 인터랙티브 음악 체험을 제공합니다.

## 🎵 프로젝트 소개

Samulnori Frontend는 전통 사물놀이를 현대적으로 재해석한 AI 기반 인터랙티브 음악 앱의 클라이언트 애플리케이션입니다. 웹캠을 통해 감지된 객체들을 전통 사물놀이 악기 소리와 매핑하여, 누구나 쉽게 사물놀이를 체험할 수 있도록 합니다.

### 주요 특징
- 🎯 **실시간 객체 인식**: 웹캠을 통한 실시간 객체 감지 및 시각화
- 🎵 **사운드 매핑**: 객체와 전통 악기 소리의 실시간 매핑 인터페이스
- 🎮 **인터랙티브 체험**: 직관적인 UI를 통한 음악 연주 경험
- 👥 **커뮤니티**: 사용자 간 콘텐츠 공유 및 소셜 기능
- ⚙️ **개인화 설정**: 사용자 맞춤형 사운드 매핑 및 환경 설정

## 🚀 시작하기

### 개발 환경 설정

메인 README의 실행 방법을 참고하세요. 여기서는 Frontend 특화 내용만 다룹니다.

1. **Frontend 의존성 설치**
   ```bash
   npm install
   ```

2. **개발 모드 실행**
   ```bash
   npm run dev
   ```

3. **안전한 개발 모드 실행 (권장)**
   ```bash
   npm run dev:safe
   ```

### Frontend 전용 명령어

- `npm run build` - Electron 실행 파일 빌드
- `npm run electron` - Electron 실행
- `npm run pack` - Electron 패키지 실행 파일 생성
- `npm run cleanup` - Python 프로세스 정리

### 시스템 요구사항

- **운영체제**: Windows 10/11 (64bit)
- **메모리**: 최소 8GB RAM (16GB 권장)
- **저장공간**: 최소 2GB 여유 공간
- **웹캠**: USB 웹캠 또는 내장 카메라
- **브라우저**: 최신 Chrome 또는 Edge (개발 모드)

## 🏗️ 빌드 및 배포

### 프로덕션 빌드

1. **앱 빌드**
   ```bash
   npm run build:exe
   ```

2. **빌드된 앱 실행**
   - 빌드가 완료되면 `release/win-unpacked/` 폴더에 실행 파일이 생성됩니다
   - `SamulnoriApp.exe`를 실행하여 앱을 시작할 수 있습니다

### 빌드 특징

- **자동 백엔드 서버 실행**: 앱이 시작되면 자동으로 백엔드 서버가 실행됩니다
- **정적 파일 직접 로드**: 빌드된 앱에서는 별도의 웹 서버 없이 정적 파일을 직접 로드합니다
- **Portable 배포**: 설치 없이 실행 가능한 포터블 형태로 배포됩니다
- **통합 패키징**: Frontend와 Backend가 하나의 실행 파일로 패키징됩니다

### 배포 파일 구조

```
release/win-unpacked/
├── SamulnoriApp.exe          # 메인 실행 파일
├── resources/
│   ├── backend/              # 백엔드 코드 (빌드 시 포함)
│   ├── venv/                 # Python 가상환경
│   └── app.asar              # 패키지된 앱 파일
└── ... (기타 Electron 파일들)
```

## 🎮 사용 방법

### 기본 사용법

1. **앱 실행**: `SamulnoriApp.exe`를 더블클릭하여 실행
2. **카메라 권한**: 웹캠 접근 권한을 허용
3. **객체 설정**: 감지할 객체를 선택하고 사운드 매핑 설정
4. **연주 시작**: 객체를 카메라 앞에 두고 움직여 음악 연주

### 고급 기능

- **커스텀 사운드**: 자신만의 사운드 파일을 업로드하여 매핑
- **멀티플레이어**: 여러 사용자가 함께 연주 가능
- **녹화 기능**: 연주 내용을 녹화하여 저장
- **커뮤니티 공유**: 연주 영상을 커뮤니티에 업로드

## 🔧 문제 해결

### Electron과 Cursor가 함께 꺼지는 문제

이 문제는 주로 백엔드 프로세스가 제대로 종료되지 않아서 발생합니다.

#### 해결 방법:

1. **안전한 개발 모드 사용**
   ```bash
   npm run dev:safe
   ```

2. **수동으로 프로세스 정리**
   ```bash
   npm run cleanup
   ```

3. **작업 관리자에서 프로세스 종료**
   - 작업 관리자 열기 (Ctrl + Shift + Esc)
   - "python.exe" 프로세스 찾기
   - 해당 프로세스 우클릭 → "작업 끝내기"

4. **강제 종료 후 재시작**
   ```bash
   # 모든 Python 프로세스 강제 종료
   taskkill /f /im python.exe
   
   # Electron 재시작
   npm run dev:safe
   ```

### 빈 화면이 나타나는 경우

- 백엔드 서버가 정상적으로 시작되었는지 확인하세요
- 개발자 도구(F12)를 열어 콘솔 오류를 확인하세요
- 방화벽 설정에서 앱 접근을 허용했는지 확인하세요

### 백엔드 서버 연결 실패

- 포트 8000이 다른 프로그램에 의해 사용되고 있지 않은지 확인하세요
- 빌드된 앱의 경우 백엔드가 자동으로 시작되는지 확인하세요

### 카메라 인식 문제

- 웹캠이 정상적으로 연결되어 있는지 확인하세요
- 다른 프로그램에서 웹캠을 사용하고 있지 않은지 확인하세요
- 카메라 권한이 허용되어 있는지 확인하세요

### 사운드 출력 문제

- 시스템 볼륨이 켜져 있는지 확인하세요
- 올바른 오디오 출력 장치가 선택되어 있는지 확인하세요
- 사운드 드라이버가 최신 버전인지 확인하세요

#### 예방 방법:

- 앱을 종료할 때는 반드시 창의 X 버튼을 사용하세요
- Ctrl+C로 강제 종료하지 마세요
- 앱이 응답하지 않을 때는 작업 관리자에서 정리 후 재시작하세요
- 정기적으로 앱을 재시작하여 메모리 누수를 방지하세요

## 📁 프로젝트 구조

```
electron/samulnori/           # Frontend (현재 폴더)
├── public/
│   ├── electron.js           # Electron 메인 프로세스
│   ├── preload.js            # 프리로드 스크립트
│   ├── assets/               # 정적 자산 (이미지, 아이콘 등)
│   └── loop/                 # 루프 관련 아이콘
├── src/
│   ├── components/           # React 컴포넌트
│   │   ├── camera/           # 카메라 관련 컴포넌트
│   │   ├── common/           # 공통 컴포넌트
│   │   ├── community/        # 커뮤니티 관련 컴포넌트
│   │   └── setting/          # 설정 관련 컴포넌트
│   ├── stores/               # Zustand 스토어
│   ├── hooks/                # 커스텀 훅
│   ├── contexts/             # React Context
│   ├── routers/              # 라우터 설정
│   ├── styles/               # 스타일 파일
│   ├── api/                  # API 통신 모듈
│   └── utils/                # 유틸리티 함수
├── package.json              # Frontend 의존성
└── README.md                 # 이 파일
```

## 🛠️ 기술 스택

- **Frontend**: React, Vite, Electron
- **State Management**: Zustand
- **Graphics**: Konva.js
- **UI Animation**: Framer Motion
- **Routing**: React Router DOM
- **Real-time Communication**: WebSocket
- **Audio Processing**: Web Audio API
- **Build Tool**: Vite
- **Desktop Framework**: Electron

## 📝 개발 노트

- Electron과 React가 함께 실행됩니다
- 웹캠 스트림을 실시간으로 처리하고 시각화합니다
- 전역 상태 관리를 통해 컴포넌트 간 데이터가 동기화됩니다
- WebSocket을 통한 실시간 통신을 지원합니다
- 메모리 사용량을 최적화하기 위해 정기적인 가비지 컬렉션이 필요합니다

## 🎯 주요 기능

- **실시간 객체 인식**: 웹캠을 통한 실시간 객체 감지 및 시각화
- **사운드 매핑**: 객체와 사운드의 실시간 매핑 인터페이스
- **커뮤니티 기능**: 사용자 간 상호작용 및 콘텐츠 공유
- **설정 관리**: 개인화된 설정 및 환경 구성
- **반응형 UI**: 다양한 화면 크기에 최적화된 인터페이스
- **멀티미디어 지원**: 비디오 업로드 및 재생 기능
- **사용자 인증**: 소셜 로그인 및 계정 관리
- **실시간 협업**: 여러 사용자의 동시 연주 지원
